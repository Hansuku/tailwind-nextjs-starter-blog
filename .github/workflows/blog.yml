# deploy.yml
name: deploy blog to aliyun
on:
  push:
    branches:
      - master
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      # use ssh login server
      - name: ssh login
        run: |
          mkdir ~/.ssh
          touch ~/.ssh/id_rsa
          cat > ~/.ssh/id_rsa << EOF
            ${{ secrets.REMOTE_HOST }}
            EOF
          cat ~/.ssh/id_rsa
      # - name: Checkout
      #   uses: actions/checkout@master
      # # ä½¿ç”¨ node:10
      # - name: use Node.js 14
      #   uses: actions/setup-node@v1
      #   with:
      #     node-version: 14
      # # npm install
      # - name: npm install
      #   run: |
      #     npm install
      #   env:
      #     CI: true
      # # build
      # - name: nextjs build
      #   run: |
      #     npm build
      #   env:
      #     CI: true

      # # Deploy
      # - name: Deploy
      #   uses: easingthemes/ssh-deploy@v2.0.7
      #   env:
      #     SSH_PRIVATE_KEY: ${{ secrets.ACCESS_TOKEN }}
      #     ARGS: "-avz --delete"
      #     SOURCE: ".next/"
      #     REMOTE_HOST: ${{ secrets.REMOTE_HOST }}
      #     REMOTE_USER: ${{ secrets.REMOTE_USER }}
      #     REMOTE_PORT: 22
      #     TARGET: ${{ secrets.TARGET }}
      #     DEPLOY_KEY_NAME: "id_rsa"
